import streamlit as st
import random

ARTWORKS = [
    {
        "id": "10661-17csont.jpg",
        "title": "Pellegrinaggio ai Cedri in Libano",
        "artist": "Tivadar Kosztka Csontváry", 
        "year": "1907",
        "style": "Olio su tela, 200 x 205 cm",
        "image_url": "10661-17csont.jpg",
        "standard_description": """
"Il modo in cui Csontváry vedeva la natura fu sintetizzato in "Baalbek" (1906). 
Sebbene fosse ancora interessato alla natura, intraprese nuove strade nell'arte. 
Dopo la mostra di Parigi del 1907, i suoi dipinti con i cedri realizzati in Libano, pieni di simboli e visioni, 
segnarono l'inizio di un nuovo periodo. Gli alberi sono menzionati nella mitologia di quasi tutte le 
nazioni come simboli di fertilità o di conoscenza. Nel caso dei cedri, Csontváry non volle 
ritrarre solo un motivo naturale, ma collegò il suo messaggio a un simbolo noto e universale.
 Gli storici dell'arte e gli psicologi che si sono occupati della letteratura su Csontváry 
 identificarono "Il Cedro Solitario" con il solitario Csontváry, mentre il suo contraltare, 
 "Pellegrinaggio ai Cedri in Libano", fu identificato con l'artista celebrato dagli altri e da se stesso. 
 Quest'ultima opera potrebbe essere una ripetizione simbolica del suo precoce "Autoritratto", ma in questo 
 quadro l'artista simboleggia il proprio io nell'albero di cedro. La veridicità dell'affermazione è supportata 
 dagli scritti di Csontváry, in cui menziona l'albero come simbolo della sua persona. L'ordine, la composizione 
 e i colori del dipinto sono subordinati a un mondo pieno di simboli. I doppi tronchi dell'albero sull'asse 
 del quadro organizzano e tengono insieme gli eventi con i loro rami che crescono verso l'alto
in uno schema sofisticato. Intorno a loro si svolge una celebrazione che ricorda antichi rituali. 
L'intera immagine è intessuta di esperienze con la natura e della presenza di "energie" in forme diverse, 
che Csontváry riteneva importanti. I complicati simboli del dipinto portano contenuti diversi, ma 
sono "manifestazioni del concetto magico del mondo di Csontváry, e in quanto tali, realizzazioni 
visive di simboli che emergono dalla profondità dell'anima umana" (Lajos Németh).".
"""
    },
    {
        "id": "43944-1deposi1.jpg",
        "title": "Deposizione", 
        "artist": "Rogier van der Weyden",
        "year": "c. 1435",
        "style": "Olio su tavola di quercia, 220 x 262 cm",
        "image_url": "43944-1deposi1.jpg",
        "standard_description": """
Il dipinto più antico che possa essere attribuito a Rogier van der Weyden con una certa sicurezza
è anche l'opera esistente più grande e influente dell'artista: la grande Deposizione. Non può essere 
stato dipinto molto dopo il 1435, l'anno stabilito con metodi di datazione dendrocronologica, il
che coinciderebbe anche con le circostanze della vita di Rogier in quel periodo. D'altra parte, deve
essere stato dipinto prima del 1443, data della copia più antica (nella Sint-Pieterskerk, Lovanio). 
La Deposizione era una pala d'altare, destinata alla cappella della Confraternita degli Arcieri di Lovanio, 
che la commissionò. (Le due piccole balestre negli speroni inferiori del traforo nel dipinto si riferiscono 
alla Confraternita).
Maria d'Ungheria (1505-1558), Reggente dei Paesi Bassi, acquisì il dipinto dagli Arcieri di Lovanio 
prima del 1548. In seguito entrò in possesso di suo nipote, il Re Filippo II di Spagna (1527-1598; re dal 1556), 
che infine la collocò nel monastero-fortezza dell'Escorial da lui fondato vicino a Madrid. A quel tempo,
la Deposizione formava il centro di un trittico, ma non ci sono indicazioni che i pannelli laterali fossero 
originariamente parte dell'opera; è più probabile che la Deposizione fosse originariamente un pannello unico.
Con i suoi circa 2,2 metri di altezza e 2,6 metri di larghezza, il dipinto è molto grande secondo gli standard usuali 
dei quadri fiamminghi primitivi; in termini di concezione è veramente monumentale. Dieci figure in tutto coprono 
quasi interamente la superficie dipinta, con le loro teste vicine al bordo superiore del pannello. Il corpo 
di Gesù è stato già rimosso dalla Croce e viene accolto da due uomini anziani, il barbuto Giuseppe d'Arimatea e Nicodemo. 
Circondati dagli amici addolorati di Gesù, stanno reggendo il Suo corpo morto per un momento prima di deporlo a terra. 
Maria sta svenendo cadendo a terra accanto a suo figlio, e viene sorretta da Giovanni, il discepolo prediletto di Gesù,
e da una delle donne sante. All'estrema destra, la disperata Maria Maddalena sembra sul punto di collassare.
La scena rappresentata sarebbe durata solo un momento, ma non c'è nulla di momentaneo nella sua raffigurazione, che è completamente 
distaccata dall'evento storico. Rogier ottiene questo effetto principalmente collocando il gruppo in una nicchia dipinta simile a
un reliquiario d'altare; il colle del Golgota, il Luogo dei Teschi dove sorgeva la Croce, è suggerito solo da teschi e ossa di braccia 
sulla stretta striscia di pavimento in pietra. Viene così stabilito un collegamento con quei reliquiari dorati contenenti statue dipinte 
che erano una forma particolarmente costosa e sfarzosa di pala d'altare. Tuttavia, Rogier non stava imitando un altare scolpito. Mostra figure 
"vive" piuttosto che statue, e l'effetto realistico è enfatizzato dal loro aspetto, quasi a grandezza naturale, nel luogo dove ci 
si aspetterebbero semplici statue di legno in un altare. Usando tali metodi, Rogier conferisce loro la tridimensionalità delle statue 
ma l'aspetto di un dipinto, che è molto più realistico della scultura. Tuttavia, tali considerazioni avrebbero giocato 
solo una parte minore nella decisione di Rogier di ambientare la scena nella nicchia d'altare dipinta. 
La sua preoccupazione principale era enfatizzare l'incisività della raffigurazione. Rogier si allontana persino 
deliberatamente da ciò che può essere immaginato razionalmente, rompendo così con il modo di rappresentazione spaziale realistica che
era stata raggiunta solo di recente nella pittura. La nicchia che dipinge è abbastanza profonda in fondo al quadro per accogliere diverse figure, 
il montante della Croce e la scala appoggiata contro di essa; ma in alcune aree in alto sembra avvicinarsi alla superficie del quadro - l'aiutante sulla scala
 è premuto strettamente nello spazio superiore poco profondo del reliquiario, mentre la testa del barbuto Giuseppe d'Arimatea appena sotto sembra sporgere dal quadro. 
 Tutte le figure sono portate in primo piano dal muro posteriore dorato, così che lo spazio le circonda da vicino: per quanto convincenti possano sembrare le loro azioni individualmente, 
 non ci sarebbe mai stato spazio sufficiente per tutte loro in realtà. Il risultato è un senso di atemporalità e un'intensità quasi opprimente.
La nicchia dipinta offrì a Rogier un altro vantaggio: poteva mantenere il fondo dorato usuale nella pittura medievale 
senza offendere le esigenze della raffigurazione naturalistica. Lo sfondo del dipinto è, infatti, una superficie dorata reale e anche una rappresentazione 
pittorica di una - il retro del reliquiario. Rogier mette in relazione le figure tra loro in una composizione magistrale, eppure enfatizza
 una serie di accenti diversi. Il corpo esanime di Cristo è al centro e sembra essere tenuto in modo abbastanza naturale dai due uomini, quasi frontale rispetto 
 all'osservatore, con quasi nulla altro che lo invada. Questa è la parte del quadro destinata a ispirare la maggiore reverenza, riferendosi al sacramento in cui, 
 nella fede cattolica, l'ostia e il vino diventano il corpo e il sangue di Cristo. Durante la funzione divina, il pane e il vino sarebbero stati posti sull'altare sotto questo dipinto, 
 e quando il sacerdote alzava l'ostia sopra la sua testa durante la cerimonia, la congregazione lo avrebbe visto farlo direttamente di fronte al corpo dipinto di Cristo.
Il corpo quasi radiante è immacolato e bello, non deturpato dai segni della flagellazione, e la sua forma delicata ma quasi gonfia ha una distinta morbidezza sensuale. 
Solo i segni delle cinque ferite sono brutti squarci che sanguinano. Tuttavia, il lungo rivolo di sangue dalla ferita nel costato di Cristo scorre sul corpo come una linea delicata che traccia la curva dello stomaco.
L'altro personaggio principale nel dipinto è Maria. La Madre di Dio, che sprofonda a terra come morta, forma un parallelo con Cristo, permettendo all'artista di creare un legame tra i due gruppi principali in un audace 
effetto di composizione, poiché si stanno muovendo in direzioni diverse: Cristo viene portato via verso destra, mentre Maria sta cadendo a sinistra. Allo stesso tempo, la corrispondenza tra le figure illustra un'importante 
idea teologica dell'epoca: il compassionevole soffrire di Maria stessa e la sua parte nell'atto di redenzione di Cristo. Sulla destra del quadro, non direttamente coinvolta nell'azione, sta Maria Maddalena. I suoi magnifici abiti mondani, 
con il vestito scollato che mostra i suoi seni pieni e sensuali, indicano che lei è la "grande peccatrice" che ha abbandonato la sua vita depravata e si è rivolta a Cristo pentita. In termini di composizione, la figura della Maddalena chiude il quadro a
 destra come una grande parentesi, corrispondendo alla figura similmente curva di Giovanni a sinistra. La curva del mantello di Maria Maddalena, che si protende in avanti nel quadro, è riecheggiata dall'orlo della veste di broccato indossata da Nicodemo,
   e proseguita nella metà sinistra del quadro dalle pieghe dell'abito blu della Vergine Maria. Tali forme e linee sovrapposte determinano la struttura dell'intero quadro: la curva del corpo di Cristo è continuata nel braccio sinistro della Maddalena, 
   ed è attraversata dalla diagonale che corre in direzione opposta dagli occhi di Nicodemo, attraverso le mani di Cristo e Maria, fino alle orbite del teschio. Anche il braccio sinistro di Cristo riecheggia i movimenti che sembrano curvarsi e ruotare l'uno sull'altro al centro del quadro.
La Deposizione è tra i capolavori eccelsi dell'arte fiamminga e uno dei pilastri della fama di Rogier. Come opera di un pittore di 35-40 anni, difficilmente può essere descritta come una produzione giovanile, eppure solo con questo dipinto iniziamo a vedere Rogier
 più chiaramente come una personalità artistica. Soprattutto, il quadro mostra inconfondibili somiglianze con alcune delle opere maggiori del Maestro di Flémalle.
"""
    },
    {
        "id": "02502-5season.jpg", 
        "title": "Le Quattro Stagioni in una Testa",
        "artist": "Giuseppe Arcimboldo",
        "year": "c. 1590", 
        "style": "Olio su legno di pioppo, 60 x 45 cm",
        "image_url": "02502-5season.jpg",
        "standard_description": """
"Quest'opera fu dipinta per Don Gregorio Comanini, un letterato mantovano. 
Egli fornisce la seguente descrizione del dipinto nel suo dialogo "Il Figino", pubblicato nel 1591:
"Ti prego, fa' che Comanino ti mostri quel dipinto che ha realizzato delle quattro stagioni.
Allora vedrai un'opera davvero speciale! Un tronco molto nodoso rappresenta il petto e la testa, 
alcune cavità per la bocca e gli occhi, e un ramo sporgente per il naso; la barba è fatta di ciuffi di muschio 
e alcuni rametti sulla fronte formano le corna. Questo ceppo d'albero, privo di proprie foglie o frutti, 
rappresenta l'inverno, che non produce nulla di per sé, ma dipende dalle produzioni delle altre stagioni.
Un piccolo fiore sul suo petto e sopra le sue spalle simboleggia la primavera, così come un mazzo di spighe legato 
ad alcuni rametti, e un mantello di paglia intrecciata che gli copre le spalle, e due ciliegie pendenti da un ramo 
che formano il suo orecchio, e due prugne sulla nuca rappresentano l'estate.
E due grappoli d'uva pendenti da un rametto, uno bianco e uno rosso, e alcune mele, nascoste tra l'edera 
sempreverde che germoglia dalla sua testa, simboleggiano l'autunno.
Tra i rami nella testa, uno al centro sta perdendo un po' della sua corteccia, e pezzi di essa sono piegati 
e stanno cadendo; sull'area bianca di questo ramo è scritto 'ARCIMBOLDUS P.'.
Il dipinto è così, in ogni caso, e se lo vedrai, ti piacerà straordinariamente."
"""
    }
]
def initialize_artwork_order():
    if 'artwork_order' not in st.session_state:
        artwork_indices = list(range(len(ARTWORKS)))
        random.shuffle(artwork_indices)
        st.session_state.artwork_order = artwork_indices

def get_artwork_by_index(index): 
    initialize_artwork_order()
    if 0 <= index < len(st.session_state.artwork_order):
        real_index = st.session_state.artwork_order[index]
        return ARTWORKS[real_index]
    return None

def get_all_artworks():
    initialize_artwork_order()
    return [ARTWORKS[i] for i in st.session_state.artwork_order]

def get_artwork_description(artwork, experimental_group, top_interests):
    
    from api.description_generator import DescriptionGenerator
    generator = DescriptionGenerator()
    
    if experimental_group == 'B':  
        description = generator.get_personalized_description(artwork, top_interests)
    else:  
        description = generator.get_standard_description(artwork)  
    
    return description